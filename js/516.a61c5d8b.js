"use strict";(globalThis["webpackChunkislands"]=globalThis["webpackChunkislands"]||[]).push([[516],{2516:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ye});var o=n(9835),l=n(6970);function a(e,t,n,a,s,i){const r=(0,o.up)("q-item-section"),u=(0,o.up)("q-item"),c=(0,o.up)("q-separator"),m=(0,o.up)("q-list"),d=(0,o.up)("q-menu"),p=(0,o.up)("q-btn"),w=(0,o.up)("q-toolbar-title"),g=(0,o.up)("q-toolbar"),f=(0,o.up)("q-header"),v=(0,o.up)("router-view"),b=(0,o.up)("q-page-container"),k=(0,o.up)("game-footer"),h=(0,o.up)("q-footer"),_=(0,o.up)("q-layout"),y=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(_,{view:"lHh lpr lFf"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{class:"semi-trans-panel",style:(0,l.j5)({paddingLeft:e.headPad})},{default:(0,o.w5)((()=>[(0,o.Wm)(g,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p,{flat:"",dense:"",round:"",icon:"img:assets/icons/eagle-24.png","aria-label":"Menu"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Wm)(m,{style:{"min-width":"200px"}},{default:(0,o.w5)((()=>[(0,o.wy)(((0,o.wg)(),(0,o.j4)(u,{clickable:"",onClick:t[0]||(t[0]=t=>e.aboutDlg())},{default:(0,o.w5)((()=>[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Uk)("About")])),_:1})])),_:1})),[[y]]),(0,o.wy)(((0,o.wg)(),(0,o.j4)(u,{clickable:"",onClick:t[1]||(t[1]=t=>e.saveGame())},{default:(0,o.w5)((()=>[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Save")])),_:1})])),_:1})),[[y]]),(0,o.Wm)(c),(0,o.Wm)(c),(0,o.wy)(((0,o.wg)(),(0,o.j4)(u,{clickable:"",class:"text-negative",onClick:t[2]||(t[2]=t=>e.resetGame())},{default:(0,o.w5)((()=>[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Log Out")])),_:1})])),_:1})),[[y]])])),_:1})])),_:1})])),_:1}),(0,o.Wm)(w,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.game.userName)+" "+(0,l.zw)(e.userLocation),1)])),_:1}),(0,o._)("div",null,"App v"+(0,l.zw)(e.version),1)])),_:1})])),_:1},8,["style"]),(0,o.Wm)(b,null,{default:(0,o.w5)((()=>[(0,o.Wm)(v)])),_:1}),(0,o.Wm)(h,{class:"semi-trans-panel"},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{space:e.wid},null,8,["space"])])),_:1})])),_:1})}n(9665);var s=n(499),i=n(9302);const r={key:0,class:"text-center"},u={key:4};function c(e,t,n,a,s,i){const c=(0,o.up)("hangar-control"),m=(0,o.up)("planet-control"),d=(0,o.up)("jump-control"),p=(0,o.up)("starmap-control"),w=(0,o.up)("q-toolbar-title"),g=(0,o.up)("q-toolbar");return"404"!==a.path?((0,o.wg)(),(0,o.j4)(g,{key:0},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{class:"fit row wrap justify-center items-start content-start"},{default:(0,o.w5)((()=>["/"===a.path?((0,o.wg)(),(0,o.iD)("div",r,"Version: "+(0,l.zw)(a.version),1)):((0,o.wg)(),(0,o.iD)(o.HY,{key:1},["Hangar"==a.view?((0,o.wg)(),(0,o.j4)(c,{key:0})):"Planet"==a.view?((0,o.wg)(),(0,o.j4)(m,{key:1})):"Jump"==a.view?((0,o.wg)(),(0,o.j4)(d,{key:2})):"StarMap"==a.view?((0,o.wg)(),(0,o.j4)(p,{key:3})):((0,o.wg)(),(0,o.iD)("p",u,(0,l.zw)(a.view),1))],64))])),_:1})])),_:1})):(0,o.kq)("",!0)}var m=n(8339),d=n(9085);const p={class:"fit row wrap justify-around items-start content-center"};function w(e,t,n,l,a,s){const i=(0,o.up)("q-btn");return(0,o.wg)(),(0,o.iD)("div",p,[(0,o.Wm)(i,{outline:"",onClick:t[0]||(t[0]=e=>l.onLeave()),class:"self-center game-btn",flat:""},{default:(0,o.w5)((()=>[(0,o.Uk)(" Leave Hangar ")])),_:1})])}var g=n(5259),f=n(5031);const v={name:"HangarControl",setup(){const e=(0,f.g)();return{onLeave(){e.loc_bld=-1,g.lA.events.emit("exit")}}}};var b=n(1639),k=n(4455),h=n(9984),_=n.n(h);const y=(0,b.Z)(v,[["render",w]]),C=y;_()(v,"components",{QBtn:k.Z});const Z={class:"fit row wrap justify-around items-start content-center"},W={class:"column self-center"},M={class:"row",style:{background:"url(./assets/images/btn_move.png)","background-size":"100% 100%"}},q={class:"column"},Q={class:"column"};function j(e,t,n,l,a,s){const i=(0,o.up)("q-btn"),r=(0,o.up)("q-btn-group"),u=(0,o.up)("q-tooltip");return(0,o.wg)(),(0,o.iD)("div",Z,[(0,o.Wm)(r,{outline:"",class:"self-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{outline:"",label:"-",onClick:l.onZoomOut},null,8,["onClick"]),(0,o.Wm)(i,{outline:"",label:"0",onClick:l.onZoomZero},null,8,["onClick"]),(0,o.Wm)(i,{outline:"",label:"+",onClick:l.onZoomIn},null,8,["onClick"])])),_:1}),(0,o._)("div",W,[l.hasHangar()?((0,o.wg)(),(0,o.j4)(i,{key:0,onClick:t[0]||(t[0]=e=>l.onEnter()),class:"self-center game-btn",flat:""},{default:(0,o.w5)((()=>[(0,o.Uk)(" Enter Hangar ")])),_:1})):(0,o.kq)("",!0),l.isBeacon()?((0,o.wg)(),(0,o.j4)(i,{key:1,onClick:t[1]||(t[1]=e=>l.showStarmap()),class:"self-center game-btn",flat:""},{default:(0,o.w5)((()=>[(0,o.Uk)(" Look to stars ")])),_:1})):(0,o.kq)("",!0),l.isJump()?((0,o.wg)(),(0,o.j4)(i,{key:2,onClick:t[2]||(t[2]=e=>l.showJump()),class:"self-center game-btn",flat:""},{default:(0,o.w5)((()=>[(0,o.Uk)(" Find the path ")])),_:1})):(0,o.kq)("",!0)]),(0,o._)("div",M,[(0,o.Wm)(i,{label:"⬅️",flat:"",class:"self-center btn-move",style:{"padding-right":"0"},onClick:t[3]||(t[3]=e=>l.onMove5())},{default:(0,o.w5)((()=>[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Uk)("⬅️, A")])),_:1})])),_:1}),(0,o._)("div",q,[(0,o.Wm)(i,{label:"↖️",flat:"",onClick:t[4]||(t[4]=e=>l.onMove6()),class:"btn-move"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Uk)("⬆️, W")])),_:1})])),_:1}),(0,o.Wm)(i,{label:"↙️",flat:"",onClick:t[5]||(t[5]=e=>l.onMove4()),class:"btn-move"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Z")])),_:1})])),_:1})]),(0,o._)("div",Q,[(0,o.Wm)(i,{label:"↗️",flat:"",onClick:t[6]||(t[6]=e=>l.onMove1()),class:"btn-move"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Uk)("E")])),_:1})])),_:1}),(0,o.Wm)(i,{label:"↘️",flat:"",onClick:t[7]||(t[7]=e=>l.onMove3()),class:"btn-move"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Uk)("⬇️, X")])),_:1})])),_:1})]),(0,o.Wm)(i,{label:"➡️",flat:"",class:"self-center btn-move",style:{"padding-left":"0"},onClick:t[8]||(t[8]=e=>l.onMove2())},{default:(0,o.w5)((()=>[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Uk)("➡️, D")])),_:1})])),_:1})])])}var A=n(2334);const U={name:"PlanetControl",setup(){const e=(0,f.g)(),t=(0,d.h)();return{onEnter(){this.hasHangar()&&(e.loc_bld=t.blds.idx,g.lA.events.emit("enter"))},showStarmap(){t.beforeMap="PlanetView",g.lA.events.emit("stars")},showJump(){g.lA.events.emit("jump")},hasHangar(){return!1!==t.blds&&t.blds.typ===A.py.BUILDING&&t.blds.sub===A.wM.CITY},isBeacon(){return!1!==t.blds&&t.blds.typ===A.py.BUILDING&&t.blds.sub===A.wM.BEACON},isJump(){return!1!==t.blds&&t.blds.typ===A.py.BUILDING&&t.blds.sub===A.wM.POINT},onZoomIn(){g.lA.events.emit("zoomIn")},onZoomOut(){g.lA.events.emit("zoomOut")},onZoomZero(){g.lA.events.emit("zoomReset")},onMove1(){g.lA.events.emit("onMove",1)},onMove2(){g.lA.events.emit("onMove",2)},onMove3(){g.lA.events.emit("onMove",3)},onMove4(){g.lA.events.emit("onMove",4)},onMove5(){g.lA.events.emit("onMove",5)},onMove6(){g.lA.events.emit("onMove",6)}}}};var D=n(7236),H=n(6858);const L=(0,b.Z)(U,[["render",j]]),I=L;_()(U,"components",{QBtnGroup:D.Z,QBtn:k.Z,QTooltip:H.Z});const S={class:"fit row wrap justify-around items-start content-center"};function x(e,t,n,l,a,s){return(0,o.wg)(),(0,o.iD)("div",S)}const z={name:"JumpControl",setup(){const e=(0,f.g)();return{onLeave(){e.loc_bld=-1,g.lA.events.emit("exit")}}},mounted(){const e=(0,i.Z)();e.dialog({title:"Observation Point",message:"Choose your destination",cancel:!0,persistent:!0}).onOk((()=>{})).onCancel((()=>{g.lA.events.emit("exit")}))}},G=(0,b.Z)(z,[["render",x]]),N=G,O={class:"fit row wrap justify-around items-start content-center"};function B(e,t,n,l,a,s){const i=(0,o.up)("q-btn");return(0,o.wg)(),(0,o.iD)("div",O,[(0,o.Wm)(i,{outline:"",onClick:t[0]||(t[0]=e=>l.onLeave()),class:"self-center game-btn",flat:""},{default:(0,o.w5)((()=>[(0,o.Uk)(" Close ")])),_:1})])}const P={name:"StarmapControl",setup(){(0,f.g)();return{onLeave(){g.lA.events.emit("close")}}}},T=(0,b.Z)(P,[["render",B]]),J=T;_()(P,"components",{QBtn:k.Z});const F={name:"GameFooter",components:{HangarControl:C,PlanetControl:I,JumpControl:N,StarmapControl:J},props:{space:Number},setup(){const e=(0,d.h)(),t=(0,m.yj)(),n=(0,o.Fl)((()=>t.path));return{path:n,view:(0,o.Fl)((()=>e.scene)),version:"0.0.14"}}};var R=n(1663),E=n(1973);const K=(0,b.Z)(F,[["render",c]]),V=K;_()(F,"components",{QToolbar:R.Z,QToolbarTitle:E.Z});const Y=(0,o._)("b",null,'"Hermeticon"',-1),X=(0,o._)("div",{class:"text-caption text-center"},"Current game ID",-1),$={class:"full-width q-badge q-badge--outline text-purple-11 text-weight-bolder text-center"};function ee(e,t,n,a,s,i){const r=(0,o.up)("q-card-section"),u=(0,o.up)("q-btn"),c=(0,o.up)("q-card-actions"),m=(0,o.up)("q-card"),d=(0,o.up)("q-dialog");return(0,o.wg)(),(0,o.j4)(d,{ref:"dialogRef",onHide:a.onDialogHide},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{class:"q-dialog-plugin",style:{"background-color":"#4e4e4e"}},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{class:"text-h5 text-center"},{default:(0,o.w5)((()=>[(0,o.Uk)("About")])),_:1}),(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" Steampunk roguelike game. You found yourself onboard of zeppeline in the strange world. Now you try to find way home through cubes placed in the void. ")])),_:1}),(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" Setting inspired by "),Y,(0,o.Uk)(" series by Vadim Panov ")])),_:1}),i.inGame?((0,o.wg)(),(0,o.j4)(r,{key:0},{default:(0,o.w5)((()=>[X,(0,o._)("div",$,(0,l.zw)(i.inGame),1)])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(c,{align:"right"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{color:"primary",label:"OK",onClick:a.onOKClick},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["onHide"])}var te=n(906);const ne={props:{},emits:[...te.Z.emits],setup(){const{dialogRef:e,onDialogHide:t,onDialogOK:n,onDialogCancel:o}=(0,te.Z)(),l=(0,f.g)();return{dialogRef:e,onDialogHide:t,store:l,onOKClick(){n()},onCancelClick:o}},computed:{inGame(){return this.store.userName}}};var oe=n(7743),le=n(4458),ae=n(3190),se=n(990),ie=n(1821);const re=(0,b.Z)(ne,[["render",ee]]),ue=re;_()(ne,"components",{QDialog:oe.Z,QCard:le.Z,QCardSection:ae.Z,QBadge:se.Z,QCardActions:ie.Z,QBtn:k.Z});const ce=(0,o.aZ)({components:{GameFooter:V},name:"MainLayout",setup(){const e=(0,i.Z)(),t=(0,f.g)(),n=(0,d.h)();return e.dark.set(!0),{game:t,wid:(0,s.iH)(window.innerWidth),headPad:(0,s.iH)("0px"),version:"0.0.14",aboutDlg(){e.dialog({component:ue})},resetGame(){e.dialog({title:"Confirm",message:"Would you like to log out from current game?If you logged locally and want to continue this game you should remember the name.",cancel:!0,persistent:!0}).onOk((()=>{n.logged=!1,this.$router.push("/")}))},saveGame(){let e={};try{e=JSON.parse(window.localStorage.getItem("savedGames")),null==e&&(e={})}catch{e={}}console.log(this.game.userName,this.game.json),e[this.game.userName]=this.game.json,window.localStorage.setItem("savedGames",JSON.stringify(e))},onResize(e,t){const n=window.innerWidth-800*Math.min(window.innerWidth/800,window.innerHeight/600);isNaN(n)||(this.wid=Math.round(n),this.headPad=n/2+"px")},starMap(){const e=g.lA.scene.getScenes(!0)[0];n.beforeMap=e.scene.key,console.log(n.beforeMap),e.scene.stop(n.beforeMap),e.scene.start("StarMapView")}}},mounted(){window.addEventListener("resize",this.onResize),this.onResize(window,null)},computed:{userLocation(){const e=this.game.loc;return e.name()}}});var me=n(7605),de=n(6602),pe=n(6362),we=n(3246),ge=n(490),fe=n(1233),ve=n(926),be=n(2133),ke=n(1378),he=n(2146);const _e=(0,b.Z)(ce,[["render",a]]),ye=_e;_()(ce,"components",{QLayout:me.Z,QHeader:de.Z,QToolbar:R.Z,QBtn:k.Z,QMenu:pe.Z,QList:we.Z,QItem:ge.Z,QItemSection:fe.Z,QSeparator:ve.Z,QToolbarTitle:E.Z,QPageContainer:be.Z,QFooter:ke.Z}),_()(ce,"directives",{ClosePopup:he.Z})}}]);